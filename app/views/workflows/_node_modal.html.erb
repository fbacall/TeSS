<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="node-modal-title" id="node-modal">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="node-modal-title">New node</h4>
      </div>

      <div class="modal-body">
        <div class="form-group">
          <label for="node-modal-form-title">Title</label>
          <input type="text" class="form-control" id="node-modal-form-title" placeholder="Title">
        </div>

        <div class="node-modal-variable-fields" id="node-modal-standard-fields">
          <div class="form-group">
            <label for="node-modal-form-description">Description</label>
            <textarea class="form-control" id="node-modal-form-description" rows="5"></textarea>
          </div>

          <div class="form-group">
            <label>Associated resources</label>
            <div id="node-modal-associated-resource-list">
              <%# This is populated via javascript. See workflows.js and templates/associated_resource_form.hbs %>
            </div>
            <button data-resource-type="materials" class="btn btn-default node-modal-add-resource-btn"><i class="fa fa-book"></i> Add training material</button>
            <button data-resource-type="events" class="btn btn-default node-modal-add-resource-btn"><i class="fa fa-calendar"></i> Add event</button>
            <button data-resource-type="tools" class="btn btn-default node-modal-add-resource-btn"><i class="fa fa-wrench"></i> Add tool</button>
            <button data-resource-type="policies" class="btn btn-default node-modal-add-resource-btn"><i class="fa fa-file-text-o"></i> Add policy</button>
          </div>
        </div>

        <div class="node-modal-variable-fields" id="node-modal-workflow-link-fields">
          <div class="form-group">
            <label>Workflow</label>
            <select class="form-control" id="node-modal-form-workflow">
              <option value=""></option>
              <%= Workflow.all.each do |workflow| %>
                  <option value="<%= workflow_path(workflow) %>"><%= workflow.title %></option>
              <% end %>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label for="node-modal-form-colour">Colour</label>
          <p style="margin: 0px; padding: 5px;">
            Click inside the box below to select colour using colour picker:
          </p>
          <input type="text" class="form-control jscolor {hash:true, zIndex: 100000}" id="node-modal-form-colour">
          <p style="background-color: #E7E7E7; margin-top: 5px; padding: 5px;">
            Or select from pre-defined colours:
            <%= render 'workflows/partials/simple_colour_picker' %>
          </p>
        </div>

        <input type="hidden" id="node-modal-form-type" value="standard">
        <input type="hidden" id="node-modal-form-id">
        <input type="hidden" id="node-modal-form-parent-id">
        <input type="hidden" id="node-modal-form-x">
        <input type="hidden" id="node-modal-form-y">
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal" id="node-modal-form-close">Close</button>
        <button type="button" class="btn btn-primary" id="node-modal-form-confirm">Save</button>
      </div>
    </div>
  </div>
</div>
